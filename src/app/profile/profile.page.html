<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="primary"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ user?.username }}</ion-title>
    <ion-buttons slot="end">
      <ion-button *ngIf="user && user.uid && auth.uid && user.uid === auth.uid; else notEditable" color="primary" routerLink="/edit-profile">
        <ion-icon slot="icon-only" name="pencil"></ion-icon>
      </ion-button>
      <ng-template #notEditable>
        <ion-button color="primary" routerLink="/">
          <ion-icon slot="icon-only" name="home"></ion-icon>
        </ion-button>
      </ng-template>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="user">

  <ion-card class="profile-card">
    <div class="profile-avatar" [ngStyle]="{ 'background-image': 'url(' + 'assets/test-salmon-horizontal.jpg' + ')' }"></div>
    <div class="profile-info">
      <ion-text color="dark">
        <h2>{{ user.username }}</h2>
        <p>
          <a href="https://caronabalona.com">caronabalona.com</a>
        </p>
      </ion-text>
    </div>
    <!--
      TODO: add social media links
    -->
  </ion-card>

  <ion-card class="description-card" style="border-bottom: 8px solid var(--ion-color-primary);">
    <ion-card-content>
      <p>{{ user.bio }}</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Commodi voluptatibus optio saepe doloribus cupiditate esse odit quaerat nulla fuga alias quo provident soluta veniam ducimus hic, quisquam explicabo eius. Quia?</p>
    </ion-card-content>
  </ion-card>

  <h2 style="margin-left: 1em; margin-top: 2em;">{{ user.postCount }} Posts</h2>

  <div class="post-list">
    <ion-card *ngFor="let post of userPosts$ | async" [routerLink]="'/post/' + post.id">
      <div class="post-img" [ngStyle]="{ 'background-image': 'url(' + post.images[0] + ')' }"></div>
      <ion-card-content>{{ post.title }}</ion-card-content>
    </ion-card>
  </div>

  <br>

</ion-content>
